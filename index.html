<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAC-MAN: The NotebookLM Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Palette Zalando-ish ma Arcade */
            --zalando-orange: #ff6900; 
            --neon-blue: #00ffff;
            --ghost-red: #ff0000;
            --ghost-pink: #ffb8ff;
            --ghost-cyan: #00ffff;
            --bg-color: #111;
            --screen-bg: #000;
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: white;
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* CABINATO ARCADE */
        #arcade-cabinet {
            width: 1024px;
            height: 768px;
            background-color: var(--screen-bg);
            border: 20px solid #222;
            border-bottom: 40px solid #222; /* Più spesso sotto */
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 105, 0, 0.2), inset 0 0 100px rgba(0,0,0,0.9);
            position: relative;
            overflow: hidden;
            transform-origin: center center;
            transition: transform 0.2s ease;
        }

        /* EFFETTO SCANLINE (Vecchio Monitor) */
        .scanlines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 100;
        }

        /* UI GENERALE SCHERMATE */
        .game-screen {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
            position: absolute;
            top: 0;
            left: 0;
            background: black;
        }

        .active {
            display: flex;
            animation: fadeIn 0.5s;
        }

        h1 {
            color: var(--zalando-orange);
            text-shadow: 4px 4px #fff;
            font-size: 3rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        h2 { color: white; margin-bottom: 30px; font-size: 1.5rem; }

        p {
            color: #ccc;
            line-height: 1.8;
            font-size: 0.9rem;
            max-width: 800px;
            margin-bottom: 2rem;
        }

        /* BOTTONI ARCADE */
        .btn {
            background: transparent;
            border: 4px solid var(--zalando-orange);
            color: var(--zalando-orange);
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2rem;
            padding: 20px 40px;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.1s;
            margin-top: 20px;
            text-shadow: 0 0 10px var(--zalando-orange);
            box-shadow: 0 0 10px var(--zalando-orange);
        }

        .btn:hover {
            background: var(--zalando-orange);
            color: black;
            transform: scale(1.05);
        }

        .btn:active { transform: scale(0.95); }

        /* ZALLY CHARACTER */
        .zally-wrapper {
            position: relative;
            display: inline-block;
            transition: all 0.5s;
        }

        .zally-img {
            width: 120px;
            height: 120px;
            object-fit: contain;
            /* Placeholder animazione se non c'è immagine */
            animation: bounce 2s infinite; 
        }

        /* Se l'immagine non carica, mostra un cerchio arancione stile PacMan */
        .zally-placeholder {
            width: 100px;
            height: 100px;
            background: var(--zalando-orange);
            border-radius: 50%;
            position: relative;
        }
        .zally-placeholder::after {
            content: '';
            position: absolute;
            top: 20px;
            right: 0;
            width: 40px;
            height: 40px;
            background: black;
            clip-path: polygon(100% 0, 0 50%, 100% 100%);
        }

        /* GHOSTS / SOURCES */
        .ghost-zone {
            display: flex;
            justify-content: space-around;
            width: 60%;
            margin: 40px auto;
            height: 120px;
            align-items: center;
        }

        .ghost {
            width: 80px;
            height: 80px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            position: relative;
            transition: opacity 0.3s;
            /* Forma base fantasma CSS se mancano img */
            background-color: transparent; 
        }

        /* Disegno CSS Fantasmino semplice */
        .ghost-shape {
            width: 60px;
            height: 70px;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-size: 0.5rem;
            color: black;
            font-weight: bold;
            padding-top: 10px;
            animation: float 2s infinite ease-in-out;
        }
        .ghost-shape::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 15px;
            background: inherit;
            clip-path: polygon(0% 0%, 20% 100%, 40% 0%, 60% 100%, 80% 0%, 100% 100%, 100% 0%);
        }

        .g-red { background: var(--ghost-red); animation-delay: 0s; }
        .g-pink { background: var(--ghost-pink); animation-delay: 0.5s; }
        .g-cyan { background: var(--ghost-cyan); animation-delay: 1s; }

        /* AREA DI GIOCO LIVELLO 1 */
        .maze-path {
            width: 80%;
            height: 150px;
            border-top: 4px dashed #333;
            border-bottom: 4px dashed #333;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 50px;
            position: relative;
        }

        .dot {
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }

        /* Q&A CHAT */
        .chat-box {
            border: 2px solid var(--zalando-orange);
            width: 70%;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
            font-size: 0.8rem;
            background: #222;
        }
        .chat-answer {
            color: var(--neon-blue);
            margin-top: 15px;
            display: none;
        }

        /* ANIMAZIONI */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes blink { 50% { opacity: 0; } }
        
        /* Animazione "Mangia" per Zally nel Livello 1 */
        @keyframes moveRightEat {
            0% { left: 0; }
            20% { left: 20%; }
            40% { left: 50%; }
            60% { left: 80%; }
            100% { left: 90%; } /* Arriva alla fine */
        }

    </style>
</head>
<body>

    <div id="arcade-cabinet">
        <div class="scanlines"></div>

        <!-- --- HOME: TITLE SCREEN --- -->
        <div id="screen-intro" class="game-screen active">
            <div class="zally-wrapper">
                <!-- IMMAGINE ZALLY: Sostituisci src="zally.png" col tuo file reale -->
                <img src="zally.png" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" class="zally-img" alt="Zally">
                <div class="zally-placeholder" style="display:none;"></div>
            </div>
            
            <h1>ZAC-MAN</h1>
            <p style="color: var(--neon-blue);">THE NOTEBOOKLM EDITION</p>
            
            <div style="margin: 40px 0; font-size: 0.7rem; color: #888;">
                MISSION: HELP ZALLY DIGEST THE OPS KNOWLEDGE<br>
                AVOID INFORMATION OVERLOAD
            </div>

            <button class="btn" onclick="startGame()">INSERT COIN</button>
            <div style="margin-top: 20px; color: var(--ghost-red); animation: blink 1s infinite; font-size: 0.8rem;">1 PLAYER ONLY</div>
        </div>


        <!-- --- LIVELLO 1: INGESTION --- -->
        <div id="screen-lvl1" class="game-screen">
            <h2>LEVEL 1: SOURCE INGESTION</h2>
            <p>I documenti "fantasmi" infestano il Drive.<br>Zally deve mangiarli per imparare!</p>

            <div class="maze-path" id="lvl1-maze">
                <!-- Zally starts here -->
                <div id="zally-lvl1" style="position: absolute; left: 10px; transition: left 2s linear;">
                    <img src="zally.png" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" style="width: 80px;" alt="Zally">
                    <div class="zally-placeholder" style="width:60px; height:60px; display:none;"></div>
                </div>

                <!-- Ghosts/Sources -->
                <div class="ghost-shape g-red" id="ghost1" style="position: absolute; left: 25%;">PDF</div>
                <div class="ghost-shape g-pink" id="ghost2" style="position: absolute; left: 55%;">DOC</div>
                <div class="ghost-shape g-cyan" id="ghost3" style="position: absolute; left: 85%;">WEB</div>
            </div>

            <div id="lvl1-controls">
                <button class="btn" onclick="eatSources()">UPLOAD SOURCES</button>
            </div>
            
            <div id="lvl1-msg" style="display:none; color: var(--neon-blue); margin-top:20px;">
                SOURCES GROUNDED!<br>Zally is now powered up.
                <br><br>
                <button class="btn" style="border-color: white; color: white; font-size: 0.8rem;" onclick="nextLevel('screen-lvl1', 'screen-lvl2')">NEXT LEVEL >></button>
            </div>
        </div>


        <!-- --- LIVELLO 2: SUMMARY --- -->
        <div id="screen-lvl2" class="game-screen">
            <h2>LEVEL 2: THE BIG SUMMARY</h2>
            <p>Un Report Gigante (50 pagine) blocca la strada!</p>
            
            <!-- Big Ghost -->
            <div class="ghost-shape g-red" id="big-ghost" style="width: 150px; height: 160px; font-size: 1rem; margin: 20px auto;">
                BIG<br>REPORT
            </div>

            <div id="summary-box" style="display:none; border: 2px dashed white; padding: 20px; color: var(--zalando-orange);">
                > ZALLY DIGESTED THE REPORT:<br><br>
                1. Nuovi KPI stabiliti<br>
                2. Deadline venerdì<br>
                3. Attenzione ai resi
            </div>

            <button id="btn-lvl2" class="btn" onclick="doSummary()">GENERATE SUMMARY</button>
            <button id="btn-next-2" class="btn" style="display:none; border-color:white; color:white;" onclick="nextLevel('screen-lvl2', 'screen-lvl3')">NEXT >></button>
        </div>


        <!-- --- LIVELLO 3: Q&A --- -->
        <div id="screen-lvl3" class="game-screen">
            <h2>LEVEL 3: ZALLY Q&A</h2>
            <p>Non serve leggere tutto.<br>Fai una domanda specifica a Zally.</p>

            <div class="chat-box">
                <span style="color: #666;">USER:</span> "Qual è la policy per i resi danneggiati?"
                
                <div id="answer-box" class="chat-answer">
                    <span style="color: var(--zalando-orange);">ZALLY:</span> I resi danneggiati vanno segnalati entro 48h nel portale.
                    <br><br>
                    <span style="background: #333; padding: 2px 5px; font-size: 0.6rem; color: white;">FONTE: Manuale Fornitori [1]</span>
                </div>
            </div>

            <button id="btn-lvl3" class="btn" onclick="doQA()">ASK ZALLY</button>
            <button id="btn-next-3" class="btn" style="display:none; border-color:white; color:white;" onclick="nextLevel('screen-lvl3', 'screen-lvl4')">NEXT >></button>
        </div>


        <!-- --- LIVELLO 4: AUDIO --- -->
        <div id="screen-lvl4" class="game-screen">
            <h2>LEVEL 4: AUDIO PODCAST</h2>
            <p>Sei in viaggio? Trasforma i documenti in un Podcast.</p>

            <div style="display:flex; justify-content:center; align-items:flex-end; height: 100px; gap:10px; margin-bottom: 30px;">
                <div class="bar" style="width:20px; background:var(--zalando-orange); height: 20px;"></div>
                <div class="bar" style="width:20px; background:white; height: 20px;"></div>
                <div class="bar" style="width:20px; background:var(--zalando-orange); height: 20px;"></div>
                <div class="bar" style="width:20px; background:white; height: 20px;"></div>
            </div>

            <button id="btn-lvl4" class="btn" onclick="doAudio()">PLAY AUDIO OVERVIEW</button>
            <button id="btn-next-4" class="btn" style="display:none; border-color:white; color:white;" onclick="nextLevel('screen-lvl4', 'screen-end')">FINISH</button>
        </div>


        <!-- --- END GAME --- -->
        <div id="screen-end" class="game-screen">
            <h1 style="color: var(--neon-blue);">YOU WIN!</h1>
            <div class="zally-wrapper">
                <img src="zally.png" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" class="zally-img" alt="Zally">
                <div class="zally-placeholder" style="display:none;"></div>
            </div>
            <p>Zally ha mangiato tutti i documenti complessi.<br>Ora sei pronto per usare NotebookLM.</p>
            
            <div style="margin-top: 30px; font-size: 0.7rem;">
                GAME DESIGNED BY<br>
                <span style="color: var(--zalando-orange); font-size: 1rem;">GEMINI CHAMPION YF&K</span>
            </div>

            <button class="btn" onclick="location.reload()">REPLAY</button>
        </div>

        <div style="position: absolute; bottom: 10px; color: #444; font-size: 0.6rem;">ZAC-MAN v1.0 • INSERT COIN TO LEARN</div>

    </div>

    <script>
        // --- GAME LOGIC ---

        // 1. Zoom Automatico (Responsive)
        function resizeGame() {
            const cabinet = document.getElementById('arcade-cabinet');
            const scale = Math.min(
                window.innerWidth / 1024,
                window.innerHeight / 768
            ) * 0.95; // 95% margin
            cabinet.style.transform = `scale(${scale})`;
        }
        window.addEventListener('resize', resizeGame);
        window.addEventListener('load', resizeGame);

        // 2. Navigation
        function nextLevel(fromId, toId) {
            document.getElementById(fromId).classList.remove('active');
            document.getElementById(toId).classList.add('active');
        }

        function startGame() {
            nextLevel('screen-intro', 'screen-lvl1');
        }

        // 3. Level 1: Ingestion Animation
        function eatSources() {
            const zally = document.getElementById('zally-lvl1');
            const btn = document.querySelector('#lvl1-controls .btn');
            
            btn.style.display = 'none'; // Hide button
            
            // Move Zally
            zally.style.left = "90%";
            
            // Hide ghosts as Zally passes them
            setTimeout(() => document.getElementById('ghost1').style.opacity = '0', 600);
            setTimeout(() => document.getElementById('ghost2').style.opacity = '0', 1200);
            setTimeout(() => document.getElementById('ghost3').style.opacity = '0', 1800);

            // Show Success
            setTimeout(() => {
                document.getElementById('lvl1-msg').style.display = 'block';
            }, 2100);
        }

        // 4. Level 2: Summary
        function doSummary() {
            const ghost = document.getElementById('big-ghost');
            const box = document.getElementById('summary-box');
            
            ghost.style.transform = "scale(0.1) rotate(360deg)";
            ghost.style.opacity = "0";
            
            setTimeout(() => {
                ghost.style.display = 'none';
                box.style.display = 'block';
                document.getElementById('btn-lvl2').style.display = 'none';
                document.getElementById('btn-next-2').style.display = 'inline-block';
            }, 800);
        }

        // 5. Level 3: Q&A
        function doQA() {
            const btn = document.getElementById('btn-lvl3');
            btn.innerHTML = "ZALLY THINKING...";
            
            setTimeout(() => {
                btn.style.display = 'none';
                document.getElementById('answer-box').style.display = 'block';
                document.getElementById('btn-next-3').style.display = 'inline-block';
            }, 1500);
        }

        // 6. Level 4: Audio
        function doAudio() {
            const bars = document.querySelectorAll('.bar');
            bars.forEach((bar, index) => {
                // Simple CSS animation via JS toggle or simple style
                bar.style.animation = `bounce 0.5s infinite alternate ${index * 0.1}s`;
            });
            
            document.getElementById('btn-lvl4').style.display = 'none';
            document.getElementById('btn-next-4').style.display = 'inline-block';
        }

    </script>
</body>
</html>
